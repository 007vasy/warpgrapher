version: 1
model:

  # User
  - name: User
    properties:
      - name: name
        type: String
        required: true
        validator: NameValidator

  # Project
  - name: Project
    properties:
      - name: name
        type: String
      - name: description
        type: String
      - name: status
        type: String
      - name: priority
        type: Int
      - name: estimate
        type: Float
      - name: active
        type: Boolean
      - name: points
        type: Int
        resolver: ProjectPoints
      - name: toptags
        type: String
        list: true
        resolver: ProjectTopTags
    relationships:
      - name: owner
        properties:
          - name: since
            type: String
        nodes: [User]
      - name: topdev
        nodes: [User]
        list: true
        resolver: ProjectTopDev
      - name: board
        nodes: [KanbanBoard, ScrumBoard]
      - name: activity
        nodes: [Commit]
        list: true
      - name: issues
        nodes: [Feature, Bug]
        list: true
      - name: topissues
        nodes: [Feature, Bug]
        list: true
        resolver: ProjectTopIssues
  
  # Feature
  - name: Feature
    properties:
      - name: name
        type: String
  
  # Bug
  - name: Bug
    properties:
      - name: name
        type: String
  
  # KanbanBoard
  - name: KanbanBoard
    properties:
      - name: name
        type: String
  
  # ScrumBoard
  - name: ScrumBoard
    properties:
      - name: name
        type: String
  
  # Commit
  - name: Commit
    properties:
      - name: hash
        type: String

endpoints: 

  # ProjectCount:
  - name: ProjectCount
    class: Query
    input:
      list: false
      type: ProjectQueryInput
    output:
      list: false
      type: Int
  
  # GlobalTopTags:
  - name: GlobalTopTags
    class: Query
    input: null
    output:
      list: true
      type: String

  # GlobalTopDev:
  - name: GlobalTopDev
    class: Query
    input: null
    output:
      list: false
      type: User

